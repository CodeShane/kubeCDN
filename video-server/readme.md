# kubeCDN: Video Server 

If you are here to deploy a demo service to your kubeCDN deployment, skip the "Docker Image" section below and proceed to [this](#kubeCDN-demo-installation) section. 

## Docker Image 
The docker image generated by the `Dockerfile` in this directory has been pushed to docker hub and is available [here](https://hub.docker.com/r/ilhaan/nginx-rtmp-sample). Pull this image using: 
```
docker pull ilhaan/nginx-rtmp-sample
```

If you would like to build and run this locally using the [Dockerfile](./Dockerfile) in this directory, you can use `./start-container.sh`. 


After running this docker image, open a video player capable of RTMP streams ([VLC](https://www.videolan.org/vlc/index.html) is a good choice) and open a network stream using the following: 
```
rtmp://localhost/vod/video.mp4
```

---------

## kubeCDN Demo Installation 
Deploy this to k8s cluster using: 
```
kubectl apply -f videoservice.yaml
```

Make sure to specify cluster config file using `--kubeconfig` above. 

## References: 
* Image - https://hub.docker.com/r/tiangolo/nginx-rtmp/
* RTMP documentation - https://github.com/arut/nginx-rtmp-module/wiki/Directives
* Sample video source: https://github.com/mediaelement/mediaelement-files
